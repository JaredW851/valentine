<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>For Jia Chee ❤️</title>

<style>
body{
    margin:0;
    height:100vh;
    display:flex;
    justify-content:center;
    align-items:center;
    background:linear-gradient(135deg,#ff9a9e,#fad0c4);
    font-family:'Comic Sans MS',cursive;
    overflow:hidden;
}

.container{
    text-align:center;
}

h1{
    font-size:44px;
    color:white;
    text-shadow:2px 2px 15px rgba(0,0,0,0.4);
}

.cursor{
    border-right:3px solid white;
    animation:blink 1s infinite;
}

@keyframes blink{
    0%{border-color:white;}
    50%{border-color:transparent;}
    100%{border-color:white;}
}

button{
    font-size:22px;
    padding:12px 30px;
    margin:20px;
    border:none;
    border-radius:50px;
    cursor:pointer;
    transition:0.2s;
}

#yes{
    background:#ff2e63;
    color:white;
}

#yes:hover{
    transform:scale(1.2);
}

#no{
    background:white;
    color:#ff2e63;
    position:absolute;
}

.message{
    display:none;
    font-size:38px;
    color:white;
    margin-top:20px;
    animation:fadeIn 2s;
}

@keyframes fadeIn{
    from{opacity:0;}
    to{opacity:1;}
}

.heart{
    position:absolute;
    color:red;
    font-size:24px;
    animation:fall linear infinite;
}

@keyframes fall{
    from{ transform:translateY(-10vh); }
    to{ transform:translateY(110vh); }
}
</style>
</head>

<body>

<div class="container">

    <h1 id="nameText" class="cursor"></h1>
    <h1 id="question" style="display:none;">Will you be my valentine?</h1>

    <button id="yes" style="display:none;">Yes ❤️</button>
    <button id="no" style="display:none;">No</button>

    <div class="message" id="loveMessage">
        I knew you will choose yes,<br>I love you darling ❤️
    </div>
</div>

<audio id="music" preload="auto">
<source src="https://assets.mixkit.co/music/preview/mixkit-romantic-saxophone-1093.mp3" type="audio/mpeg">
</audio>

<script>
const name = "Jia Chee...";
const nameText = document.getElementById("nameText");
const question = document.getElementById("question");
const yesBtn = document.getElementById("yes");
const noBtn = document.getElementById("no");
const message = document.getElementById("loveMessage");
const music = document.getElementById("music");

let i = 0;
function typeWriter(){
    if(i < name.length){
        nameText.innerHTML += name.charAt(i);
        i++;
        setTimeout(typeWriter,150);
    }else{
        setTimeout(showQuestion,800);
    }
}

function showQuestion(){
    nameText.classList.remove("cursor");
    question.style.display="block";
    yesBtn.style.display="inline-block";
    noBtn.style.display="inline-block";
}

window.onload = ()=>{
    setTimeout(typeWriter,500);
};

noBtn.addEventListener("mouseover", moveButton);
noBtn.addEventListener("touchstart", moveButton);

function moveButton(){
    const x = Math.random()*(window.innerWidth-100);
    const y = Math.random()*(window.innerHeight-50);
    noBtn.style.left = x + "px";
    noBtn.style.top = y + "px";
}

yesBtn.addEventListener("click", async ()=>{

    question.style.display="none";
    yesBtn.style.display="none";
    noBtn.style.display="none";
    nameText.style.display="none";
    message.style.display="block";

    music.currentTime = 0;
    let playPromise = music.play();
    if(playPromise !== undefined){
        playPromise.catch(()=>{
            document.body.addEventListener('touchstart', ()=>{
                music.play();
            }, { once:true });
        });
    }

    music.volume = 0;
    let fade = setInterval(()=>{
        if(music.volume < 1){
            music.volume += 0.05;
        }else{
            clearInterval(fade);
        }
    },200);

    heartRain();
});

function heartRain(){
    setInterval(()=>{
        const heart = document.createElement("div");
        heart.classList.add("heart");
        heart.innerHTML="❤️";
        heart.style.left=Math.random()*100+"vw";
        heart.style.animationDuration=(Math.random()*2+3)+"s";
        document.body.appendChild(heart);
        setTimeout(()=>{heart.remove();},5000);
    },180);
}
</script>

</body>
</html>
